# ERC20NonDilutive
Enable using a mintable token along with dilution protected preferred shares.

**DISCLAIMER: Project Beta. Use Responsibly.**
[![built-with openzeppelin](https://img.shields.io/badge/built%20with-OpenZeppelin-3677FF)](https://docs.openzeppelin.com/)

## Description
This project provides a proof of concept of a mintable ERC20 token that offers the possibility of inflation protection through the issuance of ERC721 "preferred shares". These shares are also tradeable but non-fungible (due to the need to track individual claims by tokenId). Whenever tokens are minted, holders of "preferred shares" are offered an additional claim on tokens such as to maintain the proportion of tokens they hold. This enables the usage of 1 token that can be inflated dynamically to incentivize new user onboarding while offering a form of dilution protection for investors.

## Economics
### Financing with Programmable Money
Various token distribution models have been experimented with in the past few years. The programmability of tokens offer the opportunity to innovate on different forms of financing. Through the flourishing of different crypto distribution models, entrepreneurs, users, and investors are able to test out different forms of token distribution models which each create different incentive alignment paradigms. 

### Inflation vs Hoarding
One simple characteristic we can use to distinguish tokens is inflation. The most extreme examples on each side of this metric would be a fully inflationary mintable token, and a fixed supply fully liquid token. Both have their respective advantages and disadvantages. While inflation can help bootstrap a community and incentivize the onboarding of new users, it can also severely hurt token holders who hold the asset as an investment. The opposite case of a fixed supply with no inflation, while very conservative for investors, can also have an adverse affect to tokens looking to bootstrap a community of new users who are just looking to use the token and plan on spending it on the short-term. 

Gresham's law of "bad money drives out good" can lead to hoarding and adversely impact newcomers. While some may say that early investors should be compensated for their risks and latecomers should pay a premium, the reality is that often this can hurt adoption and any potential of creating a network of users. This of course, is one of the common criticisms of bitcoin's strict supply, and while this may suit its usage as sound money or "digital gold", it is clear that for certain use cases, inflation is a good tool to incentivise DApp usage and leverage network effects.

### Current Solutions
Inflation and investors therefore seem to always be at odds, yet lack of inflation can lead to difficulty in bootstrapping early adopters, especially post launch event (ICO, Airdrop, etc...). Here we explore some of the current solutions that take a middle of the road approach in balancing inflation and investor alignment. Note that it may be possible to combine some of these features.

- Infinite Fixed Inflation: There is no cap on the token supply but tokens are minted at a fixed rate enforced by an entity or algorithmically through Proof of Work. Example: ETH (not exactly but more or less predictable with block time)
- Fixed Supply with "Community Incentive Fund": A portion of minted tokens is dedicated to subsidizing the community and new actors. Most importantly, this is different from the "Development Team Fund" which is often setup to incentivize core developers. Example: LINK (Oracle node operator subsidy)
- Fixed Supply with Locked Vesting: Similar to community fund, certain portions of minted tokens are put aside and time locked. This reduces the tradeable supply in the short-term. The primary characteristic of vesting is delaying liquidity. Example: Ripple (auto-liquidation)
- Dual token model: Issue two sets of tokens with distinguishing features. This architecture  is often used in the context of DAOs where one enables usage while the other enables governance. Examples: 1Hive (Bee/Honey) MKRDAO (DAI/MKR)
- Airdrop: Issue free tokens to onboard new users. This can incentivize marketing and DApp usage. Example: I don't know of any successful examples.

While all of these solutions present interesting middle grounds between inflation and preserving token value, each present their certain flaws. 

While fixed inflation maintains a subsidy, this is often in the context of rewarding miners and not users, and any excessive increase of inflation would lead to significant token depreciation. 

Models based on locking a fixed supply for a particular group or timescale, while the most simple, suffer from the assumption that said lockup is the "right supply". Indeed how is one supposed to know how much subsidy will be needed? Dedicating too little would make the community bootstrapping ineffective, too much would hurt investors. Burning tokens post-facto is a possibility but is more a patch than an organic solution. Another problem is governance of such "community" funds: often subsidies are dedicated to network operators (aka staking companies) and not to the onboarding of new users who are left out from the subsidy. 

Dual token models are very interesting in that they fully separate the investor from the user. This is an interesting model and various implementations exists. One criticism might be that often the "investor" token is too focused on governance and isolated from the "consumer" token's economy. The most notable example is DAI and MKR. MKR's value currently comes from its voting right and the DAI stability fee paid to MKR holders. The long-term value of voting rights is debatable however. In blockchain, this seems quite valuable but traditional stock markets seem to differ in opinion (See Google Class A vs Class C share price). It is also important to note MKR fees are not a feature of MKR but rather of DAI itself. The stability fee is there to maintain the $1 peg. At market equilibriium in the long-run, it is possible that the fee will significantly reduce as the market's demand for leverage reduces.

Airdrops are probably the most innovative and user focused form of token model. By issuing free tokens, users can experience the product and start experimenting with different use cases. Due to not requiring any investment, users are less likely to hoard the token. Provided they are not followed up by an ICO, Airdrops present the significantly reduced regulatory risk due to not requiring any form of investment from the user. Of course, their fatal flaw is that they do not raise any direct funding for the development of the project. It could be conceivable that a post-Airdrop token gain value through popularity of usage, but gaining popularity requires a good product, and a good product often needs funding. After all, developers have to eat too. One other flaw of Airdrops also present in regular ICOs, is that after the distribution period, new users can no longer be onboarded. Some projects have therefore opted to using longer timescales (> 1 year) but it can be a challenge to determine the "right" timescale.

### Dichotomy of investors & users
We recognize a dichotomy between investors and users. Investors wish to see a return on their investment and therefore wish for high-demand with a scarce supply. Users on the other hand are not willing to spend money on testing out a DApp, expect free usage, and often need incentives to keep them engaged.

Some might argue that crypto has seen the emergence of investor-users. While it may be true that a person might be interested both in investing and using the product, a rational investor will always prefer hoarding the token. Often one might say they will use the product "once prices have stabilized" (and they have therefore profited from their investment). One can only become a true user if they relinquish being an investor.

Dual token models attempt to break this dichotomy by issuing a "user" token and an "investor" token. The problem then is capturing the value of the "user" token for investors. Indeed, the scarce asset is the "investor" token but the asset in demand is the "user" token. In the long-run it therefore becomes necessary to implement value transfer schemes such as built-in fees which can imperfectly capture some of the network value. This most likely adds complexity to the ecosystem in terms of price discovery for the "user" token (especially if this is not a stablecoin).

### 1 token 2 incentives = ERC20NonDilutive
We recognize that it is often difficult to determine the "right" inflation that balances early-subsidization and investor value. ERC20NonDilutive enables flexibility in terms of minting while preserving investor value. The ERC20NonDilutive token model borrows ideas from Airdrops and Dual Token models to enable isolation of user/investor incentives while using only 1 token. It takes inspiration from traditional VC investing, more specifically, non-dilutive shares. 

Usually, when new shares (or tokens) are issued, existing shareholders see their proportional ownership decline. This is called dilution. This can be beneficial, if used for fundraising for example, or hurt shareholder value if done at a reduced valuation. Dilution can also reduce an investor's voting rights. Some investors might wish to be protected from share dilution. Non-dilutive shares protect investors from share dilution. When new shares are issued, owners of non-dilutive shares will also be issued shares proportional to their pre-dilution ownership. If the pre-money valuation is equal to the post-money valuation, a non-diluted shareholder will conserve their investment's value (they own the same proportion). If the post-money valuation is higher, their investment will have increased in value (for regular shareholders, this depends on their dilution, most famous case is of course Eduardo Saverin).

ERC20NonDilutive uses an ERC20 mintable token and an ERC721 share to represent "preferred" holders who are inflation protected. In this model, preferred shares are not exactly the same as non-dilutive shares. Instead, we split the instrument of a non-dilutive share into its two components: presently issued shares, and a free option on future inflation. That is, owning a non-dilutive share is equivalent to owning regular shares plus the guarantee of getting proportionally more shares when new shares are issued. 

## Contracts
### ERC20NonDilutive.sol
The ERC20 token represents presently issued tokens while ERC721 shares are a promise on future inflation. When new tokens are minted (governance of this is out of scope), additional tokens are minted in excess that can be claimed by holders of preferred shares. The total amount of excess tokens minted is computed as the original amount per common stock `amount/commonStockSupply` multiplied by `preferredStockSupply`. Note that there is no real "common" stock. It is simply a number used as the denominator to get the non-dilutive share of "preferred" stock. We could have also used a constant total stock supply of 100 (implying 1% for each preferred stock), but this scheme enables more granularity. Just as tokens can be minted, preferred stock can also minted dynamically. Note that new preferred stock does not give right to any tokens, only future tokens. Preferred stock can also be burned by their holders, forgoing any right to future inflation and benefitting regular holders.

Two main challenges posed by having a preferred stock architecture were keeping track of claimed tokens, using a push/pull architecture, and enabling tradeability of the preferred stock. ERC721 solves this in the best way as we do not have to keep track of addresses, but only of the NFTs. Owners can claim issued tokens using their preferred stock and also trade their option. The disintermediation of the shares and dilution protection also enables holding a mixed portfolio (for example that is 50% protected from future inflation).

### ERC721PreferredStock.sol.
Uses ERC721Enumerable, ERC721Mintable, ERC721Burnable. Shares are therefore indexed, can be created and burned at will. The ERC20 token is automatically assigned the minting role. All governance regarding ERC721 minting is therefore delegated to governance of ERC20 minting.

## Regulatory Advantages
It has been a long standing debate in the crypto industry whether tokens should be considered securities. Often tokens are used for fundraising through ICOs, or private sales to VCs. On the other hand, many would contend that certain tokens are created for specific DApp usage only and are therefore more like in-game virtual currencies (think Clash of Clans gems). The problem is often tokens are issued for both fundraising and user usage. ERC20NonDilutive enables the issuance of highly inflationary tokens dedicated for user usage while offering the possibility of fundraising through preferred stock sale. It could therefore be possible that regulators might be favorable to such dual schemes. Inflationary tokens would be distributed for free to users in an unregulated manner with no pretense of investment value. Additional tokens, combined with inflation protection shares (aka preferred stock) would be sold to investors in a regulated manner.